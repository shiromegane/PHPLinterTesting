name: ReviewdogTest
on: [ pull_request ]
env:
  REVIEWDOG_GITHUB_API_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@master
#      - name: Composer install
#        uses: php-actions/composer@v2
#        with:
#          quiet: yes
#          command: global require overtrue/phplint "squizlabs/php_codesniffer=*"
#      - name: PWD
#        run: pwd
#      - name: Lint
#        run: /tmp/vendor/bin/phplint
#      - name: Set up reviewdog
#        uses: reviewdog/action-setup@master
#      - name: Check reviewdog version
#        run: reviewdog -version
      - name: phpcs
        uses: shirobrak/action-phpcs@v1.0.0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-review
          phpcs_flags: '--standard=phpcs.xml .'
          fail_on_error: true
      - name: phpcs_with_error_code
        uses: shirobrak/action-phpcs@v1.0.0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-review
          phpcs_flags: '--standard=phpcs.xml .'
          fail_on_error: true
      - name: PHPCS
        uses: hrysd/action-php_codesniffer@master
        with:
          github_token: ${{ secrets.github_token }}
          standard: PSR12
          target_directory: .
          reporter: github-pr-review
#      - name: PHPCS
#        run: /tmp/vendor/bin/phpcs --report=emacs --standard=phpcs.xml ./ | reviewdog -reporter=github-pr-review -efm='%f:%l:%c:%m'
#      - uses: hrysd/action-php_codesniffer@master
#        with:
#          github_token: ${{ secrets.github_token }}
#          standard: PSR12
#          target_directory: .
